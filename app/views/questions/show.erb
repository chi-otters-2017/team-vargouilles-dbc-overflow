<div id="question-page-container">
  <div id="question-wrapper">
    <h2> <%= @question.title %> </h2>
    <table>
      <tr role="header" id="question-holder-row">
      <td class="question-votes-cell">
    <% if logged_in? %>
      <% @votable = @question %>
      <%=erb(:'votes/_show')%>
    <%else%>
      <span class="vote-count">
      <%= @votable.total_votes %>
      </span>
    <% end %>
      </td>
      <td class="question-body-cell"> 
        <p> Question: <%= @question.content %> </p>
      </td> 
    </tr>
    </table>
  </div>

  <div class="comments-container">
    <h5>Comments</h5>
    <%if @comments%>
      <ul id ="question-<%=@question.id%>-comment-list">
        <% @comments.each do |comment| %>
          <%=erb(:'comments/_show', locals: {comment: comment}) %>
        <% end %>
      </ul>
    <% end %><br>


    <div class="new-comment-form-wrapper">
      <% if logged_in? %>
      <form  method='get' action="/questions/<%=@question.id %>/comments/new" class="reveal-button">
        <%#=erb(:'comments/_new') %>
        <input id="comment-button" class="no-js-button" type="submit" value="comment">
      </form>
      <% end %>
    </div>
  </div>

  <div id="create-new-answer">
    <% if logged_in? %>
      <%=erb(:'answers/_new') %>
    <% end %>
  </div>

  <div class="answer-container">
    <ul>
      <% @question.answers.each do |answer| %>
        <li>

          <%=erb(:'answers/_show', locals: {answer: answer}) %>

          <div class="comments-container">
            <h5>Comments</h5>
            <%if answer.comments%>
              <ul id ="answer-<%=answer.id%>-comment-list">
                <% answer.comments.each do |comment| %>
                  <%=erb(:'comments/_show', locals: {comment: comment}) %>
                <% end %>
              </ul>
            <% end %>

            <div class="new-comment-form-wrapper">
              <% if logged_in? %>
              <form  method='get' action="/answers/<%=answer.id %>/comments/new" class="reveal-button">
                <%#=erb(:'comments/_new') %>
                <input id="comment-button" class="no-js-button" type="submit" value="comment">
              </form>
              <% end %>
            </div><br>

          </div>
          <br>
        </li>
      <%end%>
    </ul>
  </div>
</div>

